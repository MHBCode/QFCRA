<div class="brid-crump">
    <div class="text">
        <span> Home ></span> Firm Details
    </div>
</div>
<div class="page">
    <div class="menu" [ngStyle]="{ 'width': menuWidth }">
        <!-- <button (click)="toggleFulMenu()" class="menu-item menu-item-btn-ce"> -->
        <i (click)="toggleFulMenu()" *ngIf="menuWidth.match(width1)"
            class="menu-icons bi bi-arrow-left-square-fill"></i>
        <!-- <p *ngIf="menuWidth.match('20%')">Close Menu</p> -->
        <i (click)="toggleFulMenu()" *ngIf="menuWidth.match(width2)"
            class="menu-icons bi bi-arrow-right-square-fill"></i>
        <!-- </button> -->
        <div class="menu-item">
            <h3 *ngIf="menuWidth.match(width1)" id="1-item" (click)="toggleMenu(1)"
                [ngClass]="{'active': menuId === 1}"
                (click)="switchTab('main')">
                FIRM Details
            </h3>
            <i *ngIf="menuWidth.match(width2)" (click)="toggleMenu(1)" class="menu-icons bi bi-info-square"></i>
            <div class="sub-menu" *ngIf="menuId === 1 && menuWidth.match(width1)">
                <a (click)="switchTab('CD')" class="menu-sub-item">
                    Core Details
                </a>
                <a (click)="switchTab('Scope')" class="menu-sub-item">
                    Scope
                </a>
                <a (click)="switchTab('Controllers')" class="menu-sub-item">
                    Controllers
                </a>
                <a (click)="switchTab('Auditors')" class="menu-sub-item">
                    Auditors
                </a>
                <a (click)="switchTab('Contacts')" class="menu-sub-item">
                    Contacts
                </a>
            </div>
        </div>
        <div class="menu-item">
            <h3 *ngIf="menuWidth.match(width1)" id="2-item" (click)="toggleMenu(2)"
                [ngClass]="{'active': menuId === 2}">
                Individuals
            </h3>
            <i *ngIf="menuWidth.match(width2)" (click)="toggleMenu(2)" class="menu-icons bi bi-people"></i>
            <div class="sub-menu" *ngIf="menuId === 2 && menuWidth.match(width1)">
                <a (click)="switchTab('INDDetails')" class="menu-sub-item">
                    Individual Details
                </a>
            </div>
        </div>
        <div class="menu-item">
            <h3 *ngIf="menuWidth.match(width1)" id="2-item" (click)="toggleMenu(3)"
                [ngClass]="{'active': menuId === 3}">
                Supervision
            </h3>
            <i *ngIf="menuWidth.match(width2)" (click)="toggleMenu(3)" class="menu-icons bi bi-kanban"></i>
            <div class="sub-menu" *ngIf="menuId === 3 && menuWidth.match(width1)">
                <a (click)="switchTab('SPRS')" class="menu-sub-item">
                    Reporting Schedule
                </a>
                <a (click)="switchTab('SPReview')" class="menu-sub-item">
                    Return Review
                </a>
                <a (click)="switchTab('SPNotices')" class="menu-sub-item">
                    Notices
                </a>
                <a (click)="switchTab('SPAdminFee')" class="menu-sub-item">
                    Admin Fee
                </a>
                <a (click)="switchTab('SPRMPs')" class="menu-sub-item">
                    RMPs
                </a>
                <a (click)="switchTab('SPBreaches')" class="menu-sub-item">
                    Breaches
                </a>
                <a (click)="switchTab('SPWaivers')" class="menu-sub-item">
                    Waivers
                </a>
                <a (click)="switchTab('SPENFAction')" class="menu-sub-item">
                    Enf. Actions
                </a>
                <a (click)="switchTab('SPRegFunds')" class="menu-sub-item">
                    Reg. Funds
                </a>
                <a (click)="switchTab('SPJournal')" class="menu-sub-item">
                    Journal
                </a>
            </div>
        </div>
    </div>

    <section id="main" class="edit-firm-section" [ngStyle]="{ 'width': dataWidth}">
        <div class="inputs-field-set">
            <div class="edit-firm-actions">
                <h2 class="edit-firm-header">
                    FIRM Details > <span>{{firmDetails?.FirmName}}</span>
                </h2>
            </div>
            <div class="edit-firms-inputs">
                <div class="input-field">
                    <label for="QFCNumber">
                        QFC Number
                    </label>
                    <input disabled name="QFCNumber" id="QFCNumber" type="text" value="{{firmDetails?.QFCNum}}">
                </div>
                <div class="input-field">
                    <label for="code">
                        Code
                    </label>
                    <input disabled name="code" id="code" type="text" value="{{firmDetails?.FirmCode}}">
                </div>
                <div class="input-field">
                    <label for="lagalStatus">
                        Legal Status
                    </label>
                    <input disabled name="lagalStatus" id="lagalStatus" type="text"
                        value="{{firmDetails?.LegalStatusTypeDesc}}">
                </div>
                <div class="input-field">
                    <label for="PrudentialCategory">
                        Prudential Category
                    </label>
                    <input disabled name="PrudentialCategory" id="PrudentialCategory" type="text"
                        value="{{firmDetails?.PrudentialCategoryTypeDesc}}">
                </div>
                <div class="input-field">
                    <label for="FinancialYearEnd">
                        Financial Year End
                    </label>
                    <input disabled name="financialYearEnd" id="financialYearEnd" type="text"
                        value="{{firmDetails?.FinYearEndTypeDesc}}">

                </div>
            </div>

        </div>
        <!---->
        <div class="inputs-field-set">
            <div class="edit-firm-actions">
                <h2 class="edit-firm-header">
                    Application Details
                </h2>
                <div class="edit-btn">
                </div>
            </div>
            <div class="edit-firms-inputs">
                <div class="input-field">
                    <label for="dateOfApplication">
                        Date of Application
                    </label>
                    <input disabled name="dateOfApplication" id="dateOfApplication" type="text" value="{{firmDetails?.AuthorisationStatusTypeID == 0
                    ? (firmDetails?.FirmLicApplDate | date: 'dd/MMM/y')
                    : (firmDetails?. FirmAuthApplDate | date: 'dd/MMM/y')}}">
                </div>

                <div class="input-field">
                    <label for="firmApplicationType">
                        Firm Application Type
                    </label>
                    <input type="text" disabled name="firmApplicationType" id="firmApplicationType"
                        value="{{firmDetails?.AuthorisationStatusTypeID == 0 ? License : Authorize}}">
                </div>

                <div class="input-field">
                    <label for="qfcLicenseStatus">
                        QFC License Status
                    </label>
                    <input disabled type="text" name="qfcLicenseStatus" id="qfcLicenseStatus"
                        value="{{firmDetails?.LicenseStatusTypeDesc}}">
                </div>

                <div class="input-field">
                    <label for="DateLicensed">
                        {{firmDetails?.LicenseStatusTypeLabelDesc}}
                    </label>
                    <input disabled name="DateLicensed" id="DateLicensed" type="text"
                        value="{{firmDetails?.LicenseApplStatusDate | date: 'dd/MMM/y'}}">
                </div>

                <div class="input-field" *ngIf="firmDetails?.AuthorisationStatusTypeID !== 0">
                    <label for="authorisationStatus">
                        Authorisation Status
                    </label>
                    <input type="text" disabled name="authorisationStatus" id="authorisationStatus"
                        value="{{firmDetails?.AuthorisationStatusTypeDesc}}">
                </div>
                <div class="input-field" *ngIf="firmDetails?.AuthorisationStatusTypeID !== 0">
                    <label for="dateApplication">
                        {{firmDetails?.AuthorisationStatusTypeLabelDesc}}
                    </label>
                    <input disabled name="dateApplication" id="dateApplication" type="text"
                        value="{{firmDetails?.AuthApplStatusDate | date: 'dd/MMM/y'}}">
                </div>
            </div>
        </div>
        <!---->
        <div class="inputs-field-set">
            <div class="edit-firm-actions">
                <h2 class="edit-firm-header">
                    Operational Information
                </h2>
                <div class="edit-btn">
                </div>
            </div>
            <div class="edit-firms-inputs">

                <div class="input-field">
                    <label for="noOfStaffInQatar">
                        No. Of Staff In Qatar (Local Staff)
                    </label>
                    <input disabled name="noOfStaffInQatar" id="noOfStaffInQatar" type="text"
                        value="{{firmOPDetails?.NumOfLocalStaff}}">
                </div>

                <div class="input-field">
                    <label for="staffTotal">
                        Staff total
                    </label>
                    <input disabled name="staffTotal" id="staffTotal" type="text"
                        value="{{firmOPDetails?.NumOfTotalStaff}}">
                </div>

                <div class="input-field notes">
                    <label for="notes">
                        Notes :
                    </label>
                    <textarea disabled name="notes" id="notes">{{getCleanedNotes(firmOPDetails?.Notes)}}</textarea>
                </div>
            </div>
        </div>
        <!---->
        <div class="inputs-field-set">
            <div class="section">
                <h2>RA Personal Assigned <button class="subbutton" (click)="getInactiveUsers()">Open History</button>
                </h2>
                <table>
                    <thead>
                        <tr>
                            <th>Function / Role</th>
                            <th>Name</th>
                            <th>Date Form</th>
                            <th>Date to</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr *ngFor="let RA of FIRMRA">
                            <td>{{RA.FirmUserAssnTypeDesc}}</td>
                            <td>{{RA.Name}}</td>
                            <td>{{RA.FirmUserAssnDateFrom | date:'MM/dd/yyyy'}}</td>
                            <td>{{RA.FirmUserAssnDateTo}}</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </section>

    <!--Start Firm details sub section-->

    <!--Core Details-->
    <section id='CD' class="edit-firm-section" [ngStyle]="{ 'width': dataWidth}" style="display: none;">

        <div class="inputs-field-set">
            <div class="edit-firm-actions">
                <h2 class="edit-firm-header">
                    FIRM Details
                </h2>

                <div style="display: flex; gap:10px">
                  <div class="btn">
                    <button (click)="editFirm()">
                        <i [class]="allowEditFirmDetails ? 'bi bi-pen' : ''"></i>
                        {{ allowEditFirmDetails ? 'Edit' : 'Save'}}
                    </button>
                </div>

                <div class="btn">
                  <button *ngIf="!allowEditFirmDetails" (click)="cancelEditFirm()">
                      Cancel
                  </button>
              </div>
                </div>

            </div>

            <div class="edit-firms-inputs">
                <div class="input-field">
                    <label for="firmName">
                        Firm Name
                    </label>
                    <input [disabled]="allowEditFirmDetails" name="firmName" id="firmName" type="text"
                        [(ngModel)]="firmDetails.FirmName">
                </div>

                <div class="input-field">
                    <label for="qfcNumber">
                        QFC Number
                    </label>
                    <input [disabled]="allowEditFirmDetails" name="qfcNumber" id="qfcNumber" type="text"
                        [(ngModel)]="firmDetails.QFCNum">
                </div>

                <div class="input-field">
                    <label for="code">
                        Code
                    </label>
                    <input [disabled]="allowEditFirmDetails" name="code" id="code" type="text"
                        [(ngModel)]="firmDetails.FirmCode">
                </div>

                <div class="input-field">
                    <label for="legalStatus">
                        Legal Status
                    </label>
                    <select [disabled]="allowEditFirmDetails" id="legalStatus">
                        <option value="select">Select</option>
                        <option value="" selected>{{firmDetails?.LegalStatusTypeDesc}}</option>
                      </select>
                </div>

                <div class="input-field">
                    <label for="qfcTradingName">
                        QFC Trading Name
                    </label>
                    <input [disabled]="allowEditFirmDetails" name="qfcTradingName" id="qfcTradingName" type="text"
                        [(ngModel)]="firmDetails.QFCTradingName">
                </div>

                <div class="input-field">
                    <label for="prevTradingNames">
                        Prev. Trading Name(s)
                    </label>
                    <input [disabled]="allowEditFirmDetails" name="prevTradingNames" id="prevTradingNames" type="text"
                    [(ngModel)]="firmDetails.PrevTradingName">
                </div>

                <div class="input-field">
                    <label for="placeOfIncorporation">
                        Place of Incorporation
                    </label>
                    <input [disabled]="allowEditFirmDetails" name="placeOfIncorporation" id="placeOfIncorporation"
                        type="text" [(ngModel)]="firmDetails.PlaceOfIncorporation">
                </div>

                <div class="input-field">
                    <label for="homeCountry">
                        Home Country
                    </label>
                    <select [disabled]="allowEditFirmDetails" id="homeCountry">
                        <option value="select">Select</option>
                        <option value="" selected>{{firmDetails?.CountyOfIncorporationDesc}}</option>
                      </select>
                </div>

                <div class="input-field" [hidden]="allowEditFirmDetails">
                    <label for="isDateDifferent">
                        Is Date of Incorporation different from Date of Licensing or Authorisation : <span style="color: red;">*</span>
                    </label>
                    <div class="radio-wrapper">
                        <input name="isIncorporationDateDifferent" id="yes" type="radio" [(ngModel)]="isDateDifferent" [value]="true">
                        Yes
                        <input name="isIncorporationDateDifferent" id="no" type="radio"  [(ngModel)]="isDateDifferent" [value]="false">
                        No
                    </div>
                </div>

                <div class="input-field" *ngIf="isDateDifferent">
                    <label for="incorporationDate">
                        Incorporation Date
                    </label>
                    <input [disabled]="allowEditFirmDetails" name="incorporationDate" id="incorporationDate" type="date" [(ngModel)]="firmDetails.DateOfIncorporation">
                </div>

                <div class="input-field">
                    <label for="financialYearEnd">
                        Financial Year End <button class="subbutton" (click)="getFYearHistory()">History</button>
                    </label>
                    <select [disabled]="allowEditFirmDetails"  id="financialYearEnd">
                        <option selected>{{firmDetails?.FinYearEndTypeDesc}}</option>
                      </select>
                </div>

                <div class="input-field">
                    <label for="financialYearEndEffectiveFrom">
                        Financial Year End Effective From
                    </label>
                    <input [disabled]="allowEditFirmDetails" name="financialYearEndEffectiveFrom"
                        id="financialYearEndEffectiveFrom" type="date"
                        [(ngModel)]="firmDetails.FirmFinYearEndEffectiveFrom">
                </div>

                <div class="input-field">
                    <label for="accountingStandards">
                        Accounting Standards <button *ngIf="firmDetails?.FinAccStdTypeDesc" class="subbutton"
                            (click)="getAccountingStandardHistory()">History</button>
                    </label>
                    <select [disabled]="allowEditFirmDetails" id="accountingStandards">
                        <option selected>{{firmDetails?.FinAccStdTypeDesc}}</option>
                      </select>
                </div>

                <div class="input-field">
                    <label for="accountingStandardsEffectiveFrom">
                        Accounting Standards Effective From
                    </label>
                    <input [disabled]="allowEditFirmDetails" name="accountingStandardsEffectiveFrom"
                        id="accountingStandardsEffectiveFrom" type="text"
                        [(ngModel)]="firmDetails.FinAccStdTypeEffectiveFrom">
                </div>

                <div class="input-field">
                    <label for="websiteLink">
                        Website Link
                    </label>
                    <input [disabled]="allowEditFirmDetails" type="text" [(ngModel)]="firmDetails.WebSiteAddress"
                        id="websiteLink">

                    <!-- <a id="websiteLink" [href]="firmDetails?.WebSiteAddress" target="_blank" rel="noopener noreferrer">
                        {{ firmDetails?.WebSiteAddress || 'No Website Available' }}
                    </a> -->
                </div>
                <div class="input-field" *ngIf="showPrevFirmNameandDateFields && firmNamesHistory?.PrevFirmName !== ''">
                    <label for="prevFirmName">
                        Prev. Firm Name <button class="subbutton" (click)="getPrevFirmName()">History</button>
                    </label>
                    <input [disabled]="allowEditFirmDetails" name="prevFirmName" id="prevFirmName" type="text"
                        value="{{firmNamesHistory?.PrevFirmName}}">
                </div>
                <div class="input-field"
                    *ngIf="showPrevFirmNameandDateFields && firmNamesHistory?.DateEffectiveTo !== ''">
                    <label for="prevFirmNameEffectiveTo">
                        Prev. Firm Name Effective To
                    </label>
                    <input [disabled]="allowEditFirmDetails" name="prevFirmNameEffectiveTo" id="prevFirmNameEffectiveTo"
                        type="text" value="{{firmNamesHistory?.DateEffectiveTo}}">
                </div>
            </div>

        </div>
        <!---->
        <div class="inputs-field-set">
            <div class="edit-firm-actions">
                <h2 class="edit-firm-header">
                    Application Details <button class="subbutton" (click)="getApplicationDetailsHistory()">Open
                        History</button>
                </h2>
            </div>
            <div class="edit-firms-inputs">
                <h3 class="subTitle-firmDetails">License Status</h3>
                <div class="input-field">
                    <label for="appliedOn">
                        Applied On
                    </label>
                    <input disabled name="appliedOn" id="appliedOn" type="text"
                        value="{{firmDetails?.FirmLicApplDate | date: 'dd/MMM/y'}}">
                </div>
                <div class="input-field">
                    <label for="licensedOn">
                        Licensed On
                    </label>
                    <input type="text" disabled name="licensedOn" id="licensedOn"
                        value="{{firmDetails?.LicensedDate | date: 'dd/MMM/y'}}"> <!--wrong integration-->
                </div>
                <div class="input-field">
                    <label for="currentStatus">
                        Current Status
                    </label>
                    <input disabled name="currentStatus" id="currentStatus" type="text"
                        value="{{firmAppDetailsLatestLicensed?.FirmApplStatusTypeDesc}}">
                </div>
                <div class="input-field">
                    <label for="currentStatusEffectiveDate">
                        Current Status Effective Date
                    </label>
                    <input disabled name="currentStatusEffectiveDate" id="currentStatusEffectiveDate" type="text"
                        value="{{firmAppDetailsLatestLicensed?.FirmApplStatusDate}}">
                </div>
                <div class="input-field">
                    <label for="lastModifiedBy">
                        Last Modified By
                    </label>
                    <input disabled name="lastModifiedBy" id="lastModifiedBy" type="text"
                        value="{{firmAppDetailsLatestLicensed?.LastModifiedByUser}}">
                </div>
                <div class="input-field">
                    <label for="lastModifiedDate">
                        Last Modified Date
                    </label>
                    <input disabled name="lastModifiedDate" id="lastModifiedDate" type="text"
                        value="{{firmAppDetailsLatestLicensed?.LastModifiedDate}}">
                </div>
                <h3 class="subTitle-firmDetails">Authorization Status</h3>
                <div class="input-field">
                    <label for="appliedOnAuth">
                        Applied On
                    </label>
                    <input disabled name="appliedOnAuth" id="appliedOnAuth" type="text"
                        value="{{firmDetails?.FirmAuthApplDate | date: 'dd/MMM/y'}}"> <!--wrong integration-->
                </div>
                <div class="input-field">
                    <label for="AuthorizedOnAuth">
                        Authorized On
                    </label>
                    <input type="text" disabled name="AuthorizedOnAuth" id="AuthorizedOnAuth"
                        value="{{firmDetails?.AuthorisationDate}}"> <!--wrong integration-->
                </div>
                <div class="input-field">
                    <label for="currentStatusAuth">
                        Current Status
                    </label>
                    <input disabled name="currentStatusAuth" id="currentStatusAuth" type="text"
                        value="{{firmAppDetailsLatestAuthorized?.FirmApplStatusTypeDesc}}">
                </div>
                <div class="input-field">
                    <label for="currentStatusEffectiveDateAuth">
                        Current Status Effective Date
                    </label>
                    <input disabled name="currentStatusEffectiveDateAuth" id="currentStatusEffectiveDateAuth"
                        type="text" value="{{firmAppDetailsLatestAuthorized?.FirmApplStatusDate}}">
                </div>
                <div class="input-field">
                    <label for="lastModifiedByAuth">
                        Last Modified By
                    </label>
                    <input disabled name="lastModifiedByAuth" id="lastModifiedByAuth" type="text"
                        value="{{firmAppDetailsLatestAuthorized?.LastModifiedByUser}}">
                </div>
                <div class="input-field">
                    <label for="lastModifiedDateAuth">
                        Last Modified Date
                    </label>
                    <input disabled name="lastModifiedDateAuth" id="lastModifiedDateAuth" type="text"
                        value="{{firmAppDetailsLatestAuthorized?.LastModifiedDate}}">
                </div>
            </div>
        </div>
        <!---->
        <div class="inputs-field-set comments">
            <div class="edit-firm-actions">
                <h2 class="edit-firm-header">Comments</h2>
            </div>
            <div class="edit-firms-inputs">
                <div class="input-field">
                    <label for="generalComments">
                        <strong>General Comments:</strong>
                    </label>
                    <textarea name="generalComments" id="generalComments">{{firmDetails?.FirmApplicationDataComments}}</textarea>
                </div>
                <div class="input-field">
                    <label for="publicRegisterComments">
                        <strong>Public Register Comments:</strong>
                    </label>
                    <textarea name="publicRegisterComments" id="publicRegisterComments">{{firmDetails?.PublicRegisterComments}}</textarea>
                </div>
            </div>
        </div>

        <!---->
        <div class="inputs-field-set" [ngClass]="{collapsed: isCollapsed['Addresses']}">
            <div class="edit-firm-actions collapse-container">
                <h2 class="edit-firm-header">
                    Addresses
                </h2>
                <button class="collapse-button" (click)="toggleCollapse('Addresses')">
                    {{ isCollapsed['Addresses'] ? '▲' : '▼'}}
                </button>
            </div>
            <div class="edit-firms-inputs">
                <div class="input-field">
                    <label for="addressType">
                        Address Type
                    </label>
                    <input disabled name="addressType" id="addressType" type="text" value="">
                </div>
                <div class="input-field">
                    <label for="addressLine1">
                        Address Line 1
                    </label>
                    <input type="text" disabled name="addressLine1" id="addressLine1"
                        value="{{firmDetails?.AddressLine1}}">
                </div>
                <div class="input-field">
                    <label for="addressLine2">
                        Address Line 2
                    </label>
                    <input disabled name="addressLine2" id="addressLine2" type="text"
                        value="{{firmDetails?.AddressLine2}}">
                </div>
                <div class="input-field">
                    <label for="addressLine3">
                        Address Line 3
                    </label>
                    <input disabled name="addressLine3" id="addressLine3" type="text"
                        value="{{firmDetails?.AddressLine3}}">
                </div>
                <div class="input-field">
                    <label for="addressLine4">
                        Address Line 4
                    </label>
                    <input disabled name="addressLine4" id="addressLine4" type="text"
                        value="{{firmDetails?.AddressLine4}}">
                </div>
                <div class="input-field">
                    <label for="city">
                        City
                    </label>
                    <input disabled name="city" id="city" type="text" value="{{firmDetails?.City}}">
                </div>
                <div class="input-field">
                    <label for="state">
                        state/province
                    </label>
                    <input disabled name="state" id="state" type="text" value="{{firmDetails?.Province}}">
                </div>
                <div class="input-field">
                    <label for="country">
                        Country
                    </label>
                    <input type="text" disabled name="country" id="country" value="{{firmDetails?.CountryName}}">
                </div>
                <div class="input-field">
                    <label for="zip">
                        Zip/Postal Code
                    </label>
                    <input disabled name="zip" id="zip" type="text" value="{{firmDetails?.PostalCode}}">
                </div>
                <div class="input-field">
                    <label for="phone">
                        Phone
                    </label>
                    <input disabled name="phone" id="phone" type="text" value="">
                </div>
                <div class="input-field">
                    <label for="fax">
                        Fax
                    </label>
                    <input disabled name="fax" id="fax" type="text" value="">
                </div>
            </div>
            <hr style="background-color: #A51E36;height: 0.5px;">
        </div>
    </section>

    <!--Scope Section-->
    <section id='Scope' class="edit-firm-section" [ngStyle]="{ 'width': dataWidth}" style="display: none;"
        *ngFor="let license of ActivityLicensed">
        <div class="licensed-section">
            <div class="licensed-header" (click)="toggleCollapse('LicensedSection')">
                Licensed
            </div>
            <div class="licensed-body" [ngClass]="{'collapsed': isCollapsed['LicensedSection']}">
                <div class="inputs-field-set scopeFor">
                    <div class="edit-firm-actions">
                        <h2 class="edit-firm-header">
                            <small>Scope for</small> {{firmDetails?.FirmName}}
                        </h2>
                        <div class="btn">
                            <button class="edit-btn" (click)="editScopeLicensed()">
                                <i [class]="allowEditScopeDetailsLic ? 'bi bi-pen' : ''"></i>
                                {{ allowEditScopeDetailsLic ? 'Edit' : 'Save'}}
                            </button>
                        </div>
                    </div>
                    <div class="edit-firms-inputs" *ngFor="let license of ActivityLicensed">
                        <div class="input-field">
                            <label for="formReff">
                                Form Reference
                            </label>
                            <input [disabled]="allowEditScopeDetailsLic" name="formReff" id="formReff" type="text"
                                value="">
                        </div>
                        <div class="input-field">
                            <label for="">
                                Link To Scope
                            </label>
                            <input [disabled]="allowEditScopeDetailsLic" name="" id="" type="text"
                                value="{{license?.ScopeCertificateLink || 'No Link'}}">
                        </div>
                        <div class="input-field">
                            <label for="scopeRevNum">
                                Scope Revision Number
                            </label>
                            <input disabled name="scopeRevNum" id="scopeRevNum" type="text"
                                value="{{license?.ScopeRevNum}}">
                        </div>
                        <div class="input-field">
                            <label for="appDate">
                                Application Date
                            </label>
                            <input [disabled]="allowEditScopeDetailsLic" name="appDate" id="appDate" type="date"
                                value="{{license?.ScopeAppliedDate | date:'yyyy-MM-dd'}}">
                        </div>
                        <div class="input-field">
                            <label for="licenseDate">
                                License Date
                            </label>
                            <input disabled name="licenseDate" id="licenseDate" type="text"
                                value="{{license?.ScopeLicensedDate}}">
                        </div>
                        <div class="input-field">
                            <label for="createdBy">
                                Created By
                            </label>
                            <input disabled name="createdBy" id="createdBy" type="text"
                                value="{{license?.ScopeCreatedByName}}">
                        </div>
                        <div class="input-field">
                            <label for="modBy">
                                Modified By
                            </label>
                            <input disabled name="modBy" id="modBy" type="text" value="{{license?.ModifiedBy}}">
                        </div>
                        <div class="input-field">
                            <label for="modDate">
                                Modification Date
                            </label>
                            <input disabled name="modDate" id="modDate" type="text"
                                value="{{license?.LastModifiedDate}}">
                        </div>
                        <div class="input-field">
                            <label for="createdDate">
                                Creation Date
                            </label>
                            <input disabled name="createdDate" id="createdDate" type="text"
                                value="{{license?.ScopeCreatedDate}}">
                        </div>
                        <div [hidden]="allowEditScopeDetailsLic" class="vary-scope">
                            <button>Vary Scope</button>
                        </div>
                    </div>

                </div>
                <!---->
                <div class="inputs-field-set">
                    <div class="edit-firm-actions">
                        <h2 class="edit-firm-header">
                            Permitted Activities
                        </h2>
                    </div>

                    <div class="permitted-activity-container1"
                        *ngIf="showPermittedActivitiesTable;else showActivityDesc">
                        <div class="permitted-activity-body">
                            <button class="add-permitted-activity"
                                style="width: 30px;height: 30px;margin-left: auto;">+</button>


                            <table>
                                <tr>
                                    <th style="width: 70%;">Activity</th>
                                    <th style="width: 30%;">Action</th>
                                    <th></th>
                                </tr>

                                <tr>
                                    <td>
                                        <div class="input-field">
                                            <select name="activities" id="activities">
                                                <option value="">Select</option>
                                                <option *ngFor="let licensedActivity of licensedActivities" [value]="licensedActivity">{{licensedActivity.ActivityTypeDesc}}</option>
                                            </select>
                                        </div>
                                    </td>
                                    <td>
                                        <div class="input-field">
                                            <select disabled name="action" id="action">
                                                <option value="add">Add</option>
                                            </select>
                                        </div>
                                    </td>
                                    <td>
                                        <button style="width: 30px;height: 30px;">
                                            <i class="bi-trash"></i>
                                        </button>
                                    </td>
                                </tr>
                            </table>
                        </div>
                    </div>

                    <ng-template #showActivityDesc>
                        <div class="permitted-activity-container">
                            <div class="scope-permitted-activity-header">
                                <p>Activity</p>
                            </div>

                            <div class="permitted-activity-body">
                                <p>{{license?.ActivityTypeDesc}}</p>
                            </div>
                        </div>
                    </ng-template>

                    <div class="permitted-activity-body">
                        <strong>Activity Details: </strong>
                        <div class="input-field conditions-textarea">
                            <textarea [disabled]="allowEditScopeDetailsLic"
                                value="{{license?.FirmActivityDetails}}"></textarea>
                        </div>
                        <strong>Specific Conditions and Restrictions: </strong>
                        <div class="input-field conditions-textarea">
                            <textarea [disabled]="allowEditScopeDetailsLic" value="{{license?.column1}}"></textarea>
                        </div>
                    </div>

                    <div class="permitted-activity-container2">
                        <div class="scope-permitted-activity-header">
                            <p>General License Conditions or restrictions</p>
                        </div>

                        <div class="permitted-activity-body">
                            <div class="input-field conditions-textarea">
                                <textarea disabled value="{{license?.GeneralConditions}}"></textarea>
                            </div>
                        </div>
                    </div>

                </div>
            </div>
        </div>
        <!---->
        <div class="authorized-section" *ngIf="firmDetails?.AuthorisationStatusTypeID !== 0">
            <div class="authorised-header" (click)="toggleCollapse('authorizeSection')">
                Authorised
            </div>
            <div class="authorized-body" [ngClass]="{'collapsed': isCollapsed['authorizeSection']}">
                <div class="inputs-field-set scopeFor">
                    <div class="edit-firm-actions">
                        <h2 class="edit-firm-header">
                            <small>Scope for</small> {{firmDetails?.FirmName}}
                        </h2>
                        <div class="btn">
                            <button class="edit-btn" (click)="editScopeAuthorized()">
                                <i [class]="allowEditScopeDetailsAuth ? 'bi bi-pen' : ''"></i>
                                {{allowEditScopeDetailsAuth ? 'Edit' : 'Save'}}
                            </button>
                        </div>
                    </div>
                    <div class="edit-firms-inputs">
                        <div class="input-field">
                            <label for="formReff">
                                Form Reference
                            </label>
                            <input disabled name="formReff" id="formReff" type="text" value="">
                        </div>
                        <div class="input-field">
                            <label for="">
                                Link To Scope
                            </label>
                            <input disabled name="" id="" type="text"
                                value="{{ActivityAuth?.ScopeCertificateLink || 'No Link'}}">
                        </div>
                        <div class="input-field">
                            <label for="">
                                Scope Revision Number
                            </label>
                            <input disabled name="" id="" type="text" value="{{ActivityAuth?.ScopeRevNum}}">
                        </div>
                        <div class="input-field">
                            <label for="q13AppDate">
                                Q13 Application Date for revisions
                            </label>
                            <input [disabled]="allowEditScopeDetailsAuth" name="q13AppDate" id="q13AppDate" type="date"
                                value="{{ActivityAuth?.ScopeAppliedDate | date:'yyyy-MM-dd'}}">
                        </div>
                        <div class="input-field">
                            <label for="incorporationDate">
                                Incorporation Date
                            </label>
                            <input disabled name="incorporationDate" id="incorporationDate" type="text"
                                value="{{ActivityAuth?.ScopeLicensedDate}}">
                        </div>
                        <div class="input-field">
                            <label for="authorisedDate">
                                Authorised Date
                            </label>
                            <input disabled name="authorisedDate" id="authorisedDate" type="text"
                                value="{{ActivityAuth?.ScopeLicensedDate}}">
                        </div>
                        <div class="input-field">
                            <label for="effectiveDate">
                                Effective Date
                            </label>
                            <input [disabled]="allowEditScopeDetailsAuth" name="effectiveDate" id="effectiveDate"
                                type="date" value="{{ActivityAuth?.ScopeEffectiveDate | date:'yyyy-MM-dd'}}">
                        </div>
                        <div class="input-field">
                            <label for="">
                                Created By
                            </label>
                            <input disabled name="" id="" type="text" value="{{ActivityAuth?.ScopeCreatedByName}}">
                        </div>
                        <div class="input-field">
                            <label for="">
                                Last Modified By
                            </label>
                            <input disabled name="" id="" type="text" value="{{ActivityAuth?.ModifiedBy}}">
                        </div>
                        <div class="input-field">
                            <label for="">
                                Last Modified Date
                            </label>
                            <input disabled name="" id="" type="text" value="{{ActivityAuth?.LastModifiedDate}}">
                        </div>
                        <div class="input-field">
                            <label for="">
                                Creation Date
                            </label>
                            <input disabled name="" id="" type="text" value="{{ActivityAuth?.ScopeCreatedDate}}">
                        </div>
                        <div [hidden]="allowEditScopeDetailsAuth" class="vary-scope">
                            <button>Vary Scope</button>
                        </div>
                    </div>
                </div>

                <!--Scope of Authorization-->
                <div class="inputs-field-set" [ngClass]="{'collapsed': isCollapsed['scopeOfAuthorization']}">
                    <div class="section">
                        <div class="edit-firm-actions collapse-container">
                            <h2 class="edit-firm-header">
                                Scope of Authorization
                            </h2>
                            <button class="collapse-button" (click)="toggleCollapse('scopeOfAuthorization')">
                                {{ isCollapsed['scopeOfAuthorization'] ? '▲' : '▼'}}
                            </button>
                        </div>
                        <div class="edit-firms-inputs">
                            <table>
                                <thead>
                                    <tr>
                                        <th>Document Type</th>
                                        <th>File Name</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td></td>
                                        <td></td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>


                <!--Regulated Activities-->
                <div class="inputs-field-set" [ngClass]="{'collapsed': isCollapsed['regulatedActivitiesSection']}">
                    <div class="section">
                        <div class="edit-firm-actions collapse-container">
                            <h2>Regulated Activities</h2>
                            <button class="collapse-button" (click)="toggleCollapse('regulatedActivitiesSection')">
                                {{ isCollapsed['regulatedActivitiesSection'] ? '▲' : '▼'}}
                            </button>
                        </div>
                        <div class="regulated-activities-container">
                            <div class="regulated-activities-PIIB"
                                *ngFor="let regulatedActivity of AuthRegulatedActivities">
                                <div class="regulated-activities-header" *ngIf="allowEditScopeDetailsAuth">
                                    <p>Category : <strong>{{regulatedActivity?.ActivityCategoryDesc}}</strong></p>
                                    <p>Activity : <strong>{{regulatedActivity?.ActivityTypeDesc}}</strong></p>
                                </div>
                                <!--or-->
                                <div class="regulated-activities-header" *ngIf="!allowEditScopeDetailsAuth">
                                    <div class="category-select">
                                        <label for="category" style="display: flex; gap: 5px;">
                                            Category <span style="color: red;">*</span>:
                                        </label>
                                        <select [(ngModel)]="regulatedActivity.selectedCategory"
                                                (ngModelChange)="onCategoryChange(regulatedActivity)"
                                                name="category" id="category">
                                            <!-- <option value="" disabled>Select</option> -->
                                            <option *ngFor="let category of activityCategories" [ngValue]="category">
                                                {{ category.ActivityCategoryDesc }}
                                            </option>
                                        </select>
                                    </div>

                                    <div class="activity-select">
                                        <label for="activity" style="display: flex; gap: 5px;">
                                            Activity <span style="color: red;">*</span>:
                                        </label>
                                        <select [(ngModel)]="regulatedActivity.selectedActivity" name="activity" id="activity">
                                            <!-- <option value="" disabled>Select</option> -->
                                            <option *ngFor="let activity of regulatedActivity.activities" [value]="activity.ActivityTypeID">
                                                {{ activity.ActivityTypeDesc }}
                                            </option>
                                        </select>
                                    </div>
                                </div>
                                <table class="regulated-activity-table" *ngIf="allowEditScopeDetailsAuth">
                                    <thead>
                                        <tr>
                                            <th>Product(s)</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <!--integration loop will be inside this tr for products-->
                                        <tr>
                                            <td>
                                                <label>
                                                    Products
                                                </label>
                                                <table class="nested-table">
                                                    <tbody>
                                                        <tr>
                                                            <td>
                                                                <label>
                                                                    Shares
                                                                </label>
                                                            </td>
                                                        </tr>
                                                        <!--Add more products here-->
                                                    </tbody>
                                                </table>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                                <label>
                                                    Products
                                                </label>

                                                <table class="nested-table">
                                                    <tbody>
                                                        <!--integration loop will be inside this tr for products-->
                                                        <tr>
                                                            <td>
                                                                <label>
                                                                    Shares
                                                                </label>
                                                            </td>
                                                        </tr>

                                                        <tr>
                                                            <td>
                                                                <label>
                                                                    Shares
                                                                </label>
                                                            </td>
                                                        </tr>

                                                        <tr>
                                                            <td>
                                                                <label>
                                                                    Shares
                                                                </label>
                                                            </td>
                                                        </tr>

                                                        <tr>
                                                            <td>
                                                                <label>
                                                                    Shares
                                                                </label>
                                                            </td>
                                                        </tr>

                                                        <tr>
                                                            <td>
                                                                <label>
                                                                    Shares
                                                                </label>
                                                            </td>
                                                        </tr>
                                                        <!--Add more products here-->
                                                    </tbody>
                                                </table>
                                            </td>
                                        </tr>
                                        <!--Add more categories here-->
                                    </tbody>
                                </table>
                                <!--or-->
                                <table class="regulated-activity-table" *ngIf="!allowEditScopeDetailsAuth">
                                    <thead>
                                        <tr>
                                            <th>Product(s)</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <!--integration loop will be inside this tr for products-->
                                        <tr>
                                            <td>
                                                <label>
                                                    <input type="checkbox"> Products
                                                </label>

                                                <table class="nested-table">
                                                    <tbody>
                                                        <tr>
                                                            <td>
                                                                <label>
                                                                    <input type="checkbox"> Shares
                                                                </label>
                                                            </td>
                                                            <td>
                                                                <select class="action-column" name="action">
                                                                    <option value="Add">Add</option>
                                                                </select>
                                                            </td>
                                                        </tr>
                                                        <!--Add more products here-->
                                                    </tbody>
                                                </table>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                                <label>
                                                    <input type="checkbox"> Products
                                                </label>

                                                <table class="nested-table">
                                                    <tbody>
                                                        <!--integration loop will be inside this tr for products-->
                                                        <tr>
                                                            <td>
                                                                <label>
                                                                    <input type="checkbox"> Shares
                                                                </label>
                                                            </td>
                                                            <td>
                                                                <select class="action-column" name="action">
                                                                    <option value="Add">Add</option>
                                                                </select>
                                                            </td>
                                                        </tr>

                                                        <tr>
                                                            <td>
                                                                <label>
                                                                    <input type="checkbox"> Shares
                                                                </label>
                                                            </td>
                                                            <td>
                                                                <select class="action-column" name="action">
                                                                    <option value="Add">Add</option>
                                                                </select>
                                                            </td>
                                                        </tr>

                                                        <tr>
                                                            <td>
                                                                <label>
                                                                    <input type="checkbox"> Shares
                                                                </label>
                                                            </td>
                                                            <td>
                                                                <select class="action-column" name="action">
                                                                    <option value="Add">Add</option>
                                                                </select>
                                                            </td>
                                                        </tr>

                                                        <tr>
                                                            <td>
                                                                <label>
                                                                    <input type="checkbox"> Shares
                                                                </label>
                                                            </td>
                                                            <td>
                                                                <select class="action-column" name="action">
                                                                    <option value="Add">Add</option>
                                                                </select>
                                                            </td>
                                                        </tr>

                                                        <tr>
                                                            <td>
                                                                <label>
                                                                    <input type="checkbox"> Shares
                                                                </label>
                                                            </td>
                                                            <td>
                                                                <select class="action-column" name="action">
                                                                    <option value="Add">Add</option>
                                                                </select>
                                                            </td>
                                                        </tr>
                                                        <!--Add more products here-->
                                                    </tbody>
                                                </table>
                                            </td>
                                        </tr>
                                        <!--Add more categories here-->
                                    </tbody>
                                </table>
                                <!--specific conditions and restrictions-->
                                <div class="specific-conditions-and-restrictions">
                                    <div class="specific-conditions-and-restrictions-header">
                                        <p>Specific Conditions and Restrictions</p>
                                    </div>

                                    <p>&nbsp;&nbsp;&nbsp;&nbsp;None</p>
                                </div>
                            </div>
                            <!--Conditions and Restrictions-->
                            <div class="conditions-and-restrictions-section">
                                <div class="conditions-and-restrictions-header">
                                    <p>Conditions and Restrictions</p>
                                </div>
                                <p>
                                    <strong>Retail Restriction</strong> &nbsp;&nbsp;
                                    <input disabled type="checkbox">
                                </p>

                                <p><strong>General Authorisation Conditions or Restrictions</strong></p>
                                <div class="input-field conditions-textarea">
                                    <textarea disabled value="{{ActivityAuth?.GeneralConditions}}"></textarea>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>


                <!-- Islamic Finance-->
                <div class="inputs-field-set"
                    *ngIf="firmDetails?.AuthorisationStatusTypeID !== 0 && islamicFinance?.IFinTypeId"
                    [ngClass]="{'collapsed': isCollapsed['islamicFinanceSection']}">
                    <div class="edit-firm-actions collapse-container">
                        <h2 class="edit-firm-header">
                            Islamic Finance
                        </h2>
                        <button class="collapse-button" (click)="toggleCollapse('islamicFinanceSection')">
                            {{ isCollapsed['islamicFinanceSection'] ? '▲' : '▼'}}
                        </button>
                    </div>
                    <div class="edit-firms-inputs">
                        <div class="input-field" *ngIf="allowEditScopeDetailsAuth">
                            <label for="isIslamicFinanceExist">
                                Islamic Finance
                            </label>
                            <input disabled name="isIslamicFinanceExist" id="isIslamicFinanceExist" type="text"
                                value="Yes">
                        </div>
                        <!--or-->
                        <div class="input-field" *ngIf="!allowEditScopeDetailsAuth">
                            <div style="display: flex ; gap: 15px;">
                                <label for="isIslamicFinanceExist">
                                    Islamic Finance
                                </label>
                                <input style="width: 15px;" type="checkbox" name="isIslamicFinanceExist" id="isIslamicFinanceExist" [checked]="islamicFinance?.IFinTypeId">
                            </div>
                        </div>
                        <div class="input-field">
                            <label for="islamicFinanceType">
                                Type
                            </label>
                            <select [disabled]="allowEditScopeDetailsAuth" name="islamicFinanceType" id="islamicFinanceType">
                                <option value="">{{islamicFinance?.IFinTypeDesc}}</option>
                            </select>
                        </div>
                        <div class="input-field endorsement">
                            <label for="effectiveDate">
                                Endorsement
                            </label>
                            <textarea [disabled]="allowEditScopeDetailsAuth" name="islamicEndorsement"
                                id="islamicEndorsement">{{islamicFinance?.Endorsement}}</textarea>
                        </div>
                        <div class="input-field">
                            <label for="lastModifiedBy">
                                Last Modified By
                            </label>
                            <input disabled name="lastModifiedBy" id="lastModifiedBy" type="text"
                                value="{{islamicFinance?.IFinLastModifiedByName}}">
                        </div>
                        <div class="input-field">
                            <label for="lastModificationDate">
                                Last Modified Date
                            </label>
                            <input disabled name="lastModificationDate" id="lastModificationDate" type="text"
                                value="{{islamicFinance?.LastModifiedDate}}">
                        </div>
                    </div>
                </div>

                <!--Prudential Category-->
                <div class="inputs-field-set" [ngClass]="{'collapsed': isCollapsed['prudentialCategorySection']}">
                    <div class="edit-firm-actions collapse-container">
                        <h2 class="edit-firm-header">
                            Prudential Category
                        </h2>
                        <button class="collapse-button" (click)="toggleCollapse('prudentialCategorySection')">
                            {{ isCollapsed['prudentialCategorySection'] ? '▲' : '▼'}}
                        </button>
                    </div>
                    <div class="edit-firms-inputs">
                        <div class="input-field">
                            <label for="prudentialCategory">
                                Prudential Category
                            </label>
                            <select [disabled]="allowEditScopeDetailsAuth" name="prudentialCategory" id="prudentialCategory">
                                <option value="">{{ActivityAuth?.PrudentialCategoryTypeDesc}}</option>
                                <!--More options will be integrated here-->
                            </select>
                        </div>
                        <div class="input-field">
                            <label for="authorisationCategory">
                                Authorisation Category
                            </label>
                            <select [disabled]="allowEditScopeDetailsAuth" name="prudentialCategory" id="prudentialCategory">
                                <option value="">{{ActivityAuth?.AuthorisationCategoryTypeDesc}}</option>
                                <!--More options will be integrated here-->
                            </select>
                        </div>
                        <div class="input-field">
                            <label for="effectiveDate">
                                Effective Date
                            </label>
                            <input [disabled]="allowEditScopeDetailsAuth" name="effectiveDate" id="effectiveDate" type="date"
                                value="{{ActivityAuth?.PrudentialCategoryEffectiveDate}}">
                        </div>
                        <div class="input-field">
                            <label for="lastModifiedBy">
                                Last Modified By
                            </label>
                            <input disabled name="lastModifiedBy" id="lastModifiedBy" type="text"
                                value="{{ActivityAuth?.PrudentialModifiedByName}}">
                        </div>
                        <div class="input-field">
                            <label for="lastModificationDate">
                                Last Modification Date
                            </label>
                            <input disabled name="lastModificationDate" id="lastModificationDate" type="text"
                                value="{{ActivityAuth?.PrudentialCategoryLastModifiedDate}}">
                        </div>

                        <table class="prudentialTable" [hidden]="!allowEditScopeDetailsAuth">
                            <thead>
                                <tr>
                                    <th>Prudential Category</th>
                                    <th>Authorisation Category</th>
                                    <th>Effective Date</th>
                                    <th>Expiration Date</th>
                                    <th>Last Modified By</th>
                                    <th>Last Modified Date</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>{{ActivityAuth?.PrudentialCategoryTypeDesc}}</td>
                                    <td>{{ActivityAuth?.AuthorisationCategoryTypeDesc}}</td>
                                    <td>{{ActivityAuth?.PrudentialCategoryEffectiveDate}}</td>
                                    <td></td>
                                    <td>{{ActivityAuth?.PrudentialModifiedByName}}y</td>
                                    <td>{{ActivityAuth?.PrudentialCategoryLastModifiedDate}}</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                <!--Prudential Return Type-->
                <div class="inputs-field-set" [ngClass]="{'collapsed': isCollapsed['prudentialReturnTypeSection']}">
                    <div class="edit-firm-actions collapse-container">
                        <h2 class="edit-firm-header">
                            Prudential Return Type
                        </h2>
                        <button class="collapse-button" (click)="toggleCollapse('prudentialReturnTypeSection')">
                            {{ isCollapsed['prudentialReturnTypeSection'] ? '▲' : '▼'}}
                        </button>
                    </div>
                    <div class="edit-firms-inputs">
                        <div class="input-field">
                            <label for="prudentialReturnType">
                                Prudential Return Type
                            </label>
                            <select [disabled]="allowEditScopeDetailsAuth" name="prudentialReturnType" id="prudentialReturnType">
                                <option value="">{{ActivityAuth?.SectorTypeDesc}}</option>
                                <!--More options will be integrated here-->
                            </select>
                        </div>
                        <div class="input-field">
                            <label for="effectiveDate">
                                Effective Date
                            </label>
                            <input [disabled]="allowEditScopeDetailsAuth" name="effectiveDate" id="effectiveDate" type="date"
                                value="{{ActivityAuth?.SectorEffectiveDate | date:'yyyy-MM-dd'}}">
                        </div>
                        <div class="input-field">
                            <label for="lastModifiedBy">
                                Last Modified By
                            </label>
                            <input disabled name="lastModifiedBy" id="lastModifiedBy" type="text"
                                value="{{ActivityAuth?.SectorModifiedByName}}">
                        </div>
                        <div class="input-field">
                            <label for="lastModificationDate">
                                Last Modification Date
                            </label>
                            <input disabled name="lastModificationDate" id="lastModificationDate" type="text"
                                value="{{ActivityAuth?.SectorLastModifiedDate}}">
                        </div>

                        <table class="prudentialTable" [hidden]="!allowEditScopeDetailsAuth">
                            <thead>
                                <tr>
                                    <th>Prudential Return Type</th>
                                    <th>Effective Date</th>
                                    <th>Expiration Date</th>
                                    <th>Last Modified By</th>
                                    <th>Last Modified Date</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>{{ActivityAuth?.SectorTypeDesc}}</td>
                                    <td>{{ActivityAuth?.SectorEffectiveDate}}</td>
                                    <td></td>
                                    <td>{{ActivityAuth?.SectorModifiedByName}}</td>
                                    <td>{{ActivityAuth?.SectorLastModifiedDate}}</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!--Controllers-->
    <section id='Controllers' class="edit-firm-section" [ngStyle]="{ 'width': dataWidth}" style="display: none;">
        <div class="btn">
            <button (click)="createController()">
                <i class="bi bi-pen"></i>
                Create
            </button>
        </div>
        <div class="inputs-field-set">
            <div class="section">
                <h2>Controllers For {{firmDetails?.FirmName}}</h2>
                <table>
                    <thead>
                        <tr>
                            <th>Name</th>
                            <th>Controller Type</th>
                            <th>Registered Number</th>
                            <th>Control Type</th>
                            <th>% of Holding</th>
                            <th>Effective Date</th>
                            <th>Cessation Date</th>
                            <th>Last Modified By</th>
                            <th>Last Modified Date</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr *ngFor="let controller of FIRMControllers" (click)="viewController()">
                            <td>{{controller.OtherEntityName}}</td>
                            <td>{{controller.EntityTypeDesc}}</td>
                            <td>{{controller.RegisteredNum}}</td>
                            <td>{{controller.ControllerControlTypeDesc}}</td>
                            <td>{{controller.PctOfShares}}</td>
                            <td>{{controller.AssnDateFrom}}</td>
                            <td>{{controller.AssnDateTo}}</td>
                            <td>{{controller.LastModifiedByOfOtherEntities}}</td>
                            <td>{{controller.LastModifiedDate}}</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>

        <div class="inputs-field-set">
            <div class="section">
                <h2>Ultimate Beneficial Owners For</h2>
                <table>
                    <thead>
                        <tr>
                            <th>Name</th>
                            <th>Controller Type</th>
                            <th>Registered Number</th>
                            <th>Control Type</th>
                            <th>% of Holding</th>
                            <th>Effective Date</th>
                            <th>Cessation Date</th>
                            <th>Last Modified By</th>
                            <th>Last Modified Date</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td></td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>

    </section>

    <!--Auditors-->
    <section id='Auditors' class="edit-firm-section" [ngStyle]="{ 'width': dataWidth}" style="display: none;">
        <div class="btn">
            <button (click)="createAuditor()">
                <i class="bi bi-plus"></i>
                Create
            </button>
            <button (click)="editAuditor()">
                <i class="bi bi-pen"></i>
                Edit
            </button>
            <!--popup message for edit-->

            <button>
                <i class="bi bi-trash"></i>
                Delete
            </button>
        </div>
        <div class="inputs-field-set">
            <div class="section">
                <div class="auditor-header">
                    <h2>Auditors For {{firmDetails?.FirmName}}</h2>
                    <span>
                        <input id="InactiveAuditors" type="checkbox">
                        <label>Display Inactive Auditors</label>
                    </span>
                </div>
                <table>
                    <thead>
                        <tr>
                            <th></th> <!--leave it empty-->
                            <th>Auditor Name</th>
                            <th>Auditor Type</th>
                            <th>Effective From Date</th>
                            <th>Effective To Date</th>
                            <th>Last Updated By</th>
                            <th>Last Updated Date</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr *ngFor="let auditor of FIRMAuditors">
                            <td class="radio-table">
                                <label class="radioBtn">
                                    <input type="radio" name="auditor" #auditorRadio>
                                    <span></span>
                                </label>
                            </td>
                            <td (click)="viewAuditor(auditor)">{{auditor.OtherEntityName}}</td>
                            <td (click)="viewAuditor(auditor)">{{auditor.EntitySubTypeDesc}}</td>
                            <td (click)="viewAuditor(auditor)">{{auditor.AssnDateFrom}}</td>
                            <td (click)="viewAuditor(auditor)">{{auditor.AssnDateTo}}</td>
                            <td (click)="viewAuditor(auditor)">{{auditor.LastMeodifiedBy}}</td>
                            <td (click)="viewAuditor(auditor)">{{auditor.LastModifiedDate}}</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
        <!--view auditor-->
        <div class="inputs-field-set" *ngIf="IsViewAuditorVisible">
            <div class="view-auditor-actions">
                <h2 class="view-auditor-header">
                    Auditor Details
                </h2>
            </div>
            <div class="view-auditor-inputs">
                <div class="input-field">
                    <label for="auditorName">
                        Auditor Name
                    </label>
                    <input disabled name="auditorName" id="auditorName" type="text"
                        value="{{selectedAuditor.OtherEntityName}}">
                </div>
                <div class="input-field">
                    <label for="auditorType">
                        Auditor Type
                    </label>
                    <input disabled name="auditorType" id="auditorType" type="text"
                        value="{{selectedAuditor.EntitySubTypeDesc}}">
                </div>
                <div class="input-field">
                    <label for="address2">
                        Effective From Date
                    </label>
                    <input disabled name="effectiveFromDate" id="effectiveFromDate" type="text"
                        value="{{selectedAuditor.AssnDateFrom}}">
                </div>
                <div class="input-field">
                    <label for="effectiveToDate">
                        Effective To Date
                    </label>
                    <input disabled name="effectiveToDate" id="effectiveToDate" type="text"
                        value="{{selectedAuditor.AssnDateTo}}">
                </div>
            </div>
        </div>
        <!--create auditor-->
        <div class="inputs-field-set" *ngIf="IsCreateAuditorVisible">
            <div class="view-auditor-actions">
                <h2 class="view-auditor-header">
                    Auditor Details
                </h2>
                <div class="btn">
                    <button class="save-btn">Save</button>
                </div>
            </div>
            <form>
                <div class="view-auditor-inputs">
                    <div class="input-field">
                        <label for="auditorName">
                            Auditor Name <span style="color: red;">*</span>
                        </label>
                        <select name="auditorName" id="auditorName" [(ngModel)]="selectedAuditorNameFromSelectBox">
                            <option value="select">Select</option>
                            <option value="other">Other</option>
                        </select>
                    </div>
                    <div class="input-field" *ngIf="selectedAuditorNameFromSelectBox === 'other'">
                        <label for="auditorName">
                            Auditor Name <span style="color: red;">*</span>
                        </label>
                        <input type="text">
                    </div>
                    <div class="input-field">
                        <label for="auditorType">
                            Auditor Type <span style="color: red;">*</span>
                        </label>
                        <select name="auditorType" id="auditorType">
                            <option value="select">Select</option>
                        </select>
                    </div>
                    <div class="input-field">
                        <label for="address2">
                            Effective From Date <span style="color: red;">*</span>
                        </label>
                        <input name="effectiveFromDate" id="effectiveFromDate" type="date">
                    </div>
                    <div class="input-field">
                        <label for="effectiveToDate">
                            Effective To Date
                        </label>
                        <input name="effectiveToDate" id="effectiveToDate" type="date">
                    </div>
                </div>
            </form>
        </div>

        <!--edit auditor-->
        <div class="inputs-field-set" *ngIf="IsEditAuditorVisible">
            <div class="view-auditor-actions">
                <h2 class="view-auditor-header">
                    Auditor Details
                </h2>
                <div class="btn">
                    <button class="save-btn">Save</button>
                </div>
            </div>
            <form>
                <div class="view-auditor-inputs">
                    <div class="input-field">
                        <label for="auditorName">
                            Auditor Name <span style="color: red;">*</span>
                        </label>
                        <select disabled name="auditorName" id="auditorName"
                            [(ngModel)]="selectedAuditorNameFromSelectBox" value="{{selectedAuditor.OtherEntityName}}">
                            <option value="select">Select</option>
                            <option value="other">Other</option>
                        </select>
                    </div>
                    <div class="input-field">
                        <label for="auditorType">
                            Auditor Type <span style="color: red;">*</span>
                        </label>
                        <select name="auditorType" id="auditorType">
                            <option value="select">Select</option>
                        </select>
                    </div>
                    <div class="input-field">
                        <label for="address2">
                            Effective From Date <span style="color: red;">*</span>
                        </label>
                        <input name="effectiveFromDate" id="effectiveFromDate" type="date">
                    </div>
                    <div class="input-field">
                        <label for="effectiveToDate">
                            Effective To Date
                        </label>
                        <input name="effectiveToDate" id="effectiveToDate" type="date">
                    </div>
                </div>
            </form>
        </div>
    </section>

    <!--Contacts-->
    <section id='Contacts' class="edit-firm-section" [ngStyle]="{ 'width': dataWidth}" style="display: none;">
        <div class="inputs-field-set">
            <div class="section">
                <div class="contacts-header">
                    <h2>Contacts For</h2>
                    <span>
                        <input id="InactiveContacts" type="checkbox">
                        <label>Display Inactive Contacts</label>
                    </span>
                </div>
                <table>
                    <thead>
                        <tr>
                            <th></th> <!--leave it empty-->
                            <th>Name</th>
                            <th>Contact Type</th>
                            <th>Contact Form</th>
                            <th>Position/Job Title</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr *ngFor="let contact of FIRMContacts">
                            <td class="radio-table">
                                <label class="radioBtn">
                                    <input type="radio" name="contact">
                                    <span></span>
                                </label>
                            </td>
                            <td>{{contact.FullName}}</td>
                            <td>{{contact.ContactTypeDesc}}</td>
                            <td>{{contact?.ContactMethodTypeDesc}}</td>
                            <td>{{contact.JobTitle}}</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </section>

    <!--End Firm details sub section-->

    <!--Start Individuals sub sections-->

    <!--Individuals Details-->
    <section id='INDDetails' class="edit-firm-section" [ngStyle]="{ 'width': dataWidth}" style="display: none;">
        <div class="inputs-field-set">
            <div class="section">
                <h2>Applied For</h2>
                <table>
                    <thead>
                        <tr>
                            <th>Individual Name</th>
                            <th>Controlled Functions</th>
                            <th>Form Type</th>
                            <th>Applied Date</th>
                            <th>Function Status</th>
                            <th>RSG Assessment Completion Date</th>
                            <th>Request Status</th>
                        </tr>
                    </thead>
                    <tbody>

                    </tbody>
                </table>
            </div>
        </div>

        <div class="inputs-field-set">
            <div class="section">
                <h2>Approved Functions For</h2>
                <table>
                    <thead>
                        <tr>
                            <th></th> <!--leave it empty-->
                            <th>Individual Name</th>
                            <th>Controlled Functions</th>
                            <th>Applied Date</th>
                            <th>Conditionally Approved Date</th>
                            <th>Conditional Approved Expiry Date</th>
                            <th>Approved Date</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td class="radio-table">
                                <label class="radioBtn">
                                    <input type="radio">
                                    <span></span>
                                </label>
                            </td>
                            <td>Individual Name</td>
                            <td>Controlled Functions</td>
                            <td>Applied Date</td>
                            <td>Conditionally Approved Date</td>
                            <td>Conditional Approved Expiry Date</td>
                            <td>Approved Date</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>

        <div class="inputs-field-set">
            <div class="section">
                <h2>Withdraw Functions For</h2>
                <table>
                    <thead>
                        <tr>
                            <th></th>
                            <th>Individual Name</th>
                            <th>Controlled Functions</th>
                            <th>Form Type</th>
                            <th>Previous Status</th>
                            <th>Current Status</th>
                            <th>Current Status Effective Date</th>
                            <th>Request Status</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td class="radio-table">
                                <label class="radioBtn">
                                    <input type="radio">
                                    <span></span>
                                </label>
                            </td>
                            <td>Individual Name</td>
                            <td>Controlled Functions</td>
                            <td>Form Type</td>
                            <td>Previous Status</td>
                            <td>Current Status</td>
                            <td>Current Status Effective Date</td>
                            <td>Request Status</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </section>

    <!--End Individuals sub sections-->

    <!--Start Supervision sub sections-->

    <!--Supervision Reporting Schedule-->
    <section id='SPRS' class="edit-firm-section" [ngStyle]="{ 'width': dataWidth}" style="display: none;">
        <div class="inputs-field-set">
            <div class="section">
                <h2>Reporting Schedule For</h2>
                <table>
                    <thead>
                        <tr>
                            <th></th> <!--leave it empty-->
                            <th>Reporting Schedule From</th>
                            <th>Reporting Schedule To</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr *ngFor="let dates of FirmAdminFees">
                            <td class="radio-table">
                                <label class="radioBtn">
                                    <input type="radio">
                                    <span></span>
                                </label>
                            </td>
                            <td>{{dates?.RptPeriodFromDate}}</td>
                            <td>{{dates?.RptPeriodToDate}}</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </section>

    <!--Supervision Review-->
    <section id='SPReview' class="edit-firm-section" [ngStyle]="{ 'width': dataWidth}" style="display: none;">
        <div class="inputs-field-set">
            <div class="section">
                <div class="return-review-header">
                    <h2>Return Review For</h2>
                    <span>
                        <label>Report Type : </label>
                        <select name="reportType" id="reportType" class="SPReview-dropdown">
                            <option>All</option>
                        </select>
                    </span>
                </div>
                <table>
                    <thead>
                        <tr>
                            <th></th> <!--leave it empty-->
                            <th>Ver</th>
                            <th>Report</th>
                            <th>Report Period Start Date</th>
                            <th>Report Period End Date</th>
                            <th>Received Date</th>
                            <th>Review Status Date</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td class="radio-table">
                                <label class="radioBtn">
                                    <input type="radio">
                                    <span></span>
                                </label>
                            </td>
                            <td>Ver</td>
                            <td>Report</td>
                            <td>Report Period Start Date</td>
                            <td>Report Period End Date</td>
                            <td>Received Date</td>
                            <td>Review Status Date</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </section>

    <!--Supervision Notices-->
    <section id='SPNotices' class="edit-firm-section" [ngStyle]="{ 'width': dataWidth}" style="display: none;">
        <div class="inputs-field-set" style="overflow-x: scroll;">
            <div class="section">
                <h2>Notices And Responses -</h2>
                <table>
                    <thead>
                        <tr>
                            <th></th> <!--leave it empty-->
                            <th>Notice Type</th>
                            <th>Notice Name</th>
                            <th>Internal Reference Number</th>
                            <th>Notice Issuer</th>
                            <th>Notice Issued Date</th>
                            <th>Issuer's Reference Number</th>
                            <th>Subject</th>
                            <th>Notice Finalized Date</th>
                            <th>Date Published on Website</th>
                            <th>Notice Sent Date</th>
                            <th>Response Due Date</th>
                            <th>Response Provided Date</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr *ngFor="let notice of FIRMNotices">
                            <td class="radio-table">
                                <label class="radioBtn">
                                    <input type="radio">
                                    <span></span>
                                </label>
                            </td>
                            <td>{{notice?.TypeOfNotice}}</td>
                            <td>{{notice?.NoticeName}}</td>
                            <td>{{notice?.InternalReferenceNumber}}</td>
                            <td>{{notice?.NoticeIssuedBy}}</td>
                            <td>{{notice?.NoticeIssuedDate}}</td>
                            <td>{{notice?.IssuersReferenceNumber}}</td>
                            <td>{{notice?.Subject}}</td>
                            <td>{{notice?.NoticeFinalizedDate}}</td>
                            <td>{{notice?.DatePublishedonWebsite}}</td>
                            <td>{{notice?.NotificationSentDate}}</td>
                            <td>{{notice?.ResponseDueDate}}</td>
                            <td>{{notice?.ResponseProvidedDate}}</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </section>

    <!--Supervision Admin Fee-->
    <section id='SPAdminFee' class="edit-firm-section" [ngStyle]="{ 'width': dataWidth}" style="display: none;">
        <div class="inputs-field-set">
            <div class="section">
                <h2>Admin Fees For</h2>
                <table>
                    <thead>
                        <tr>
                            <th></th> <!--leave it empty-->
                            <th>Report Name</th>
                            <th>Report Due Date</th>
                            <th>Materially Complete Report Receive Date</th>
                            <th>Fee Calculated</th>
                            <th>Fee Imposed</th>
                            <th>Review Status</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr *ngFor="let fee of FirmAdminFees">
                            <td class="radio-table">
                                <label class="radioBtn">
                                    <input type="radio">
                                    <span></span>
                                </label>
                            </td>
                            <td>{{fee.RptName}}</td>
                            <td>{{fee.FirmRptDueDate}}</td>
                            <td>{{fee.FirstMateriallyCompleteRptReceivedDate}}</td>
                            <td>{{fee.CalculatedAmount}}</td>
                            <td>{{fee.ImposedAmount}}</td>
                            <td>{{fee.ObjectWFStatusTypeDesc}}</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </section>

    <!--Supervision RMPs-->
    <section id='SPRMPs' class="edit-firm-section" [ngStyle]="{ 'width': dataWidth}" style="display: none;">
        <div class="inputs-field-set">
            <div class="section">
                <h2>RMPs For</h2>
                <table>
                    <thead>
                        <tr>
                            <th></th> <!--leave it empty-->
                            <th>RMP ID</th>
                            <th>Date Created</th>
                            <th>Type</th>
                            <th>Date Firm Agreed</th>
                            <th>Agreed By</th>
                            <th>RMP Status</th>
                            <th>Review Status</th>
                            <th>Review Status Date</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr *ngFor="let rmp of FIRMRMP">
                            <td class="radio-table">
                                <label class="radioBtn">
                                    <input type="radio" name="rmp">
                                    <span></span>
                                </label>
                            </td>
                            <td>{{rmp?.FirmRMPID}}</td>
                            <td>{{rmp?.RMPCreatedDate}}</td>
                            <td>{{rmp?.FirmRMPTypeDesc}}</td>
                            <td>{{rmp?.DateFirmAgreedOn}}</td>
                            <td>{{rmp?.AgreedBy}}</td>
                            <td>{{rmp?.RMPStatus}}</td>
                            <td>{{rmp?.SignOffStatus}}</td>
                            <td>{{rmp?.SignOffDate}}</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </section>

    <!--Supervision Breaches-->
    <section id='SPBreaches' class="edit-firm-section" [ngStyle]="{ 'width': dataWidth}" style="display: none;">
        <div class="inputs-field-set">
            <div class="section">
                <h2>Breaches For</h2>
                <table>
                    <thead>
                        <tr>
                            <th></th> <!--leave it empty-->
                            <th>Breach Number</th>
                            <th>Version</th>
                            <th>Breach Type</th>
                            <th>Breach Category</th>
                            <th>Breach Level</th>
                            <th>Date Of Breach</th>
                            <th>Breach Status</th>
                            <th>Last Updated By</th>
                            <th>Last Updated Date</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td class="radio-table">
                                <label class="radioBtn">
                                    <input type="radio" name="breach">
                                    <span></span>
                                </label>
                            </td>
                            <td>Breach Number</td>
                            <td>Version</td>
                            <td>Breach Type</td>
                            <td>Breach Category</td>
                            <td>Breach Level</td>
                            <td>Date Of Breach</td>
                            <td>Breach Status</td>
                            <td>Last Updated By</td>
                            <td>Last Updated Date</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </section>

    <!--Supervision Waivers-->
    <section id='SPWaivers' class="edit-firm-section" [ngStyle]="{ 'width': dataWidth}" style="display: none;">
        <div class="inputs-field-set">
            <div class="section">
                <h2>Waiver And/Or Modification For</h2>
                <table>
                    <thead>
                        <tr>
                            <th></th> <!--leave it empty-->
                            <th>Waiver Number</th>
                            <th>Version</th>
                            <th>Waiver Type</th>
                            <th>Subject</th>
                            <th>Waiver Status</th>
                            <th>Status Date</th>
                            <th>Review Date</th>
                            <th>Review Decision</th>
                            <th>Expiration Date</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr *ngFor="let waiver of FirmWaivers">
                            <td class="radio-table">
                                <label class="radioBtn">
                                    <input type="radio" name="waiver">
                                    <span></span>
                                </label>
                            </td>
                            <td>{{waiver?.WaiverNumber}}</td>
                            <td>{{waiver?.WaiverRevNum}}</td>
                            <td>{{waiver?.WaiverTypeDesc}}</td>
                            <td>{{waiver?.WaiverSubject}}</td>
                            <td>{{waiver?.WaiverStatusTypeDesc}}</td>
                            <td>{{waiver?.WaiverStatusDate}}</td>
                            <td>{{waiver?.ReviewMeetingDate}}</td>
                            <td>{{waiver?.WaiverDecisionTypeDesc}}</td>
                            <td>{{waiver?.WaiverExpirationDate}}</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </section>

    <!--Supervision ENF Actions-->
    <section id='SPENFAction' class="edit-firm-section" [ngStyle]="{ 'width': dataWidth}" style="display: none;">
        <div class="inputs-field-set">
            <div class="section">
                <div class="ENFAction-header">
                    <h2>List Of Enforcement & Disciplinary Actions</h2>
                    <span>
                        <input id="deletedRecords" type="checkbox">
                        <label>Display Deleted Records</label>
                    </span>
                </div>
                <table>
                    <thead>
                        <tr>
                            <th></th> <!--leave it empty-->
                            <th>Action</th>
                            <th>Type Of Action</th>
                            <th>Date Of Action</th>
                            <th>Firm Name</th>
                            <th>Approved Individual</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td class="radio-table">
                                <label class="radioBtn">
                                    <input type="radio">
                                    <span></span>
                                </label>
                            </td>
                            <td>Action</td>
                            <td>Type Of Action</td>
                            <td>Date Of Action</td>
                            <td>Firm Name</td>
                            <td>Approved Individual</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </section>

    <!--Supervision Reg. Funds-->
    <section id='SPRegFunds' class="edit-firm-section" [ngStyle]="{ 'width': dataWidth}" style="display: none;">
        <div class="inputs-field-set">
            <div class="section">
                <h2>List Of Registered Funds For</h2>
                <table>
                    <thead>
                        <tr>
                            <th></th> <!--leave it empty-->
                            <th>Fund Number</th>
                            <th>Fund Name</th>
                            <th>Type Of Fund</th>
                            <th>Status</th>
                            <th>Status Date</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr *ngFor="let fund of RegisteredFund">
                            <td></td>
                            <td>{{fund.RegisteredFundNumber}}</td>
                            <td>{{fund.FundName}}</td>
                            <td>{{fund.RegisteredFundTypeDesc}}</td>
                            <td>{{fund.RegisteredFundStatusTypeDesc}}</td>
                            <td>{{fund.RegisteredFundStatusDate}}</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </section>

    <!--Supervision Journal-->
    <section id='SPJournal' class="edit-firm-section" [ngStyle]="{ 'width': dataWidth}" style="display: none;">
        <div class="inputs-field-set">
            <div class="section">
                <div class="Journal-header">
                    <h2>Journal Entries For</h2>
                    <span>
                        <input id="deletedEntries" type="checkbox">
                        <label>Display Deleted Entries</label>
                    </span>
                </div>
                <table>
                    <thead>
                        <tr>
                            <th></th> <!--leave it empty-->
                            <th>Entry Type</th>
                            <th>Title</th>
                            <th>Entry Date</th>
                            <th>Last Modified Date</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>

                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </section>

    <!--End Supervision sub sections-->
</div>

<!--Popups-->
<!--Financial Year End History-->
<div *ngIf="call" class="popup-wrapper">
    <i class="bi bi-x-circle close-icon" (click)="closeFYearHistory()"></i>
    <div class="popup-info-place">
        <div class="popup-header">
            <h3>Financial Year End History</h3>
        </div>
        <table>
            <thead>
                <tr>
                    <th>Firm</th>
                    <th>Financial Year End</th>
                    <th>Financial Year Effective From</th>
                    <th>Financial Year Effective To</th>
                    <th>Modified By</th>
                    <th>Modified Date</th>
                </tr>
            </thead>
            <tbody>
                <!--*ngFor="let FR of firmFYearHistory"-->
                <tr *ngIf="firmFYearHistory">
                    <td>{{firmFYearHistory.FirmName}}</td>
                    <td>{{firmFYearHistory.FirmFinYearEndTypeDesc}}</td>
                    <td>{{firmFYearHistory.FirmFinYearEndEffectiveFrom}}</td>
                    <td>{{firmFYearHistory.FirmFinYearEndEffectiveTo}}</td>
                    <td>{{firmFYearHistory.UserName}}</td>
                    <td>{{firmFYearHistory.Column1}}</td>
                </tr>
            </tbody>
        </table>
    </div>
    <div class="popup-operations-place">
        <button style="padding: 1rem; width: 30%;" class="subbutton" (click)="closeFYearHistory()">Close</button>
    </div>
</div>
<!--Inactive Users-->
<div *ngIf="callInactiveUsers" class="InactiveUsersPopUp">
    <i class="bi bi-x-circle close-icon" (click)="closeInactiveUsers()"></i>
    <div class="popup-info-place">
        <div class="popup-header">
            <h3>Inactive Users</h3>
        </div>
        <table>
            <thead>
                <tr>
                    <th>Function / Role</th>
                    <th>Name</th>
                    <th>Date Form</th>
                    <th>Date to</th>
                </tr>
            </thead>
            <tbody>
                <tr *ngFor="let RA of firmInactiveUsers">
                    <td>{{RA.FirmUserAssnTypeDesc}}</td>
                    <td>{{RA.Name}}</td>
                    <td>{{RA.FirmUserAssnDateFrom}}</td>
                    <td>{{RA.FirmUserAssnDateTo}}</td>
                </tr>
            </tbody>
        </table>
    </div>
    <div class="popup-operations-place">
        <button style="padding: 1rem; width: 30%;" class="subbutton" (click)="closeInactiveUsers()">Close</button>
    </div>
</div>

<!--Accounting Standards-->
<div class="accountingStandardsPopUp">
    <i class="bi bi-x-circle close-icon" (click)="closeAccountingStandard()"></i>
    <div class="popup-info-place">
        <div class="popup-header">
            <h3>Accounting Standards History</h3>
        </div>
        <table>
            <thead>
                <tr>
                    <th>Firm</th>
                    <th>Financial Standard</th>
                    <th>Financial Standard Effective From</th>
                    <th>Financial Standard Effective To</th>
                    <th>Modified By</th>
                    <th>Modified Date</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>{{firmAccountingStandard?.FirmName}}</td>
                    <td>{{firmAccountingStandard?.FinAccStdTypeDesc}}</td>
                    <td>{{firmAccountingStandard?.FirmFinYearEndEffectiveFrom}}</td>
                    <td>{{firmAccountingStandard?.FirmFinYearEndEffectiveTo}}</td>
                    <td>{{firmAccountingStandard?.UserName}}</td>
                    <td>{{firmAccountingStandard?.Column1}}</td>
                </tr>
            </tbody>
        </table>
    </div>
    <div class="popup-operations-place">
        <button style="padding: 1rem; width: 30%;" class="subbutton" (click)="closeAccountingStandard()">Close</button>
    </div>
</div>
<!--Previous Firm Name-->
<div class="prevFirmNamePopUp">
    <i class="bi bi-x-circle close-icon" (click)="closePrevFirmName()"></i>
    <div class="popup-info-place">
        <div class="popup-header">
            <h3>File Name History</h3>
        </div>
        <table>
            <thead>
                <tr>
                    <th>Prev. Firm Name</th>
                    <th>Date Effective To</th>
                    <th>Modified By</th>
                    <th>Modified Date</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>{{firmNamesHistory?.PrevFirmName}}</td>
                    <td>{{firmNamesHistory?.DateEffectiveTo}}</td>
                    <td>{{firmNamesHistory?.LastModifiedBy}}</td>
                    <td>{{firmNamesHistory?.LastModifiedDate}}</td>
                </tr>
            </tbody>
        </table>
    </div>
    <div class="popup-operations-place">
        <button style="padding: 1rem; width: 30%;" class="subbutton" (click)="closePrevFirmName()">Close</button>
    </div>
</div>
<!--Application Details-->
<div class="ApplicationDetailsPopUp">
    <i class="bi bi-x-circle close-icon" (click)="closeApplicationDetails()"></i>
    <div class="popup-info-place">
        <div class="popup-header">
            <h3>Application Details History</h3>
        </div>
        <table>
            <thead>
                <tr>
                    <td style="background: #A51E36;color: white;" colspan="4">
                        Licensed Status
                    </td>
                </tr>
                <tr>
                    <th>Status</th>
                    <th>Status Date</th>
                    <th>Last Modified By</th>
                    <th>Last Modified Date</th>
                </tr>
            </thead>
            <tbody>
                <tr *ngFor="let LicenseDetailsHistory of firmAppDetailsLicensed">
                    <td>{{LicenseDetailsHistory.FirmApplStatusTypeDesc}}</td>
                    <td>{{LicenseDetailsHistory.FirmApplStatusDate}}</td>
                    <td>{{LicenseDetailsHistory.LastModifiedByUser}}</td>
                    <td>{{LicenseDetailsHistory.LastModifiedDate}}</td>
                </tr>
            </tbody>
        </table>
        <table>
            <thead>
                <tr>
                    <td style="background: #A51E36;color: white;" colspan="5">
                        Authorization Status
                    </td>
                </tr>
                <tr>
                    <th>Status</th>
                    <th>Status Date</th>
                    <th>Press Release</th>
                    <th>Last Modified By</th>
                    <th>Last Modified Date</th>
                </tr>
            </thead>
            <tbody>
                <tr *ngFor="let AuthDetailsHistory of firmAppDetailsAuthorization">
                    <td>{{AuthDetailsHistory.FirmApplStatusTypeDesc}}</td>
                    <td>{{AuthDetailsHistory.FirmApplStatusDate}}</td>
                    <td>{{AuthDetailsHistory.PressReleaseLink}}</td>
                    <td>{{AuthDetailsHistory.LastModifiedByUser}}</td>
                    <td>{{AuthDetailsHistory.LastModifiedDate}}</td>
                </tr>
            </tbody>
        </table>
    </div>
    <div class="popup-operations-place">
        <button style="padding: 1rem; width: 30%;" class="subbutton" (click)="closeApplicationDetails()">Close</button>
    </div>
</div>
